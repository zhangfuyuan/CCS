webpackJsonp([5],{"23qH":function(e,t,o){var r=o("ozRk");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);o("rjj0")("7d8fc21a",r,!0)},Q7DT:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o("//Fk"),a=o.n(r),n=o("aCoG"),s={name:"accountManager-createAccount",components:{},props:{curAccountInfo:{type:Object,default:null}},data:function(){var e=this,t=function(t,o,r){o.trim()?(e.showErrMsg.name="",r()):(e.showErrMsg.name=e.$t("accountManager.nameLengthTips"),r(new Error(" ")))},o=function(t,o,r){o.trim()?o.trim().length<6?(e.showErrMsg.password=e.$t("accountManager.passwordLengthTips"),r(new Error(" "))):(e.showErrMsg.password="",r()):(e.showErrMsg.password=e.$t("accountManager.passwordLengthTips"),r(new Error(" ")))},r=function(t,o,r){o&&o.trim().length>48?(e.showErrMsg.mark=e.$t("accountManager.markLengthTips"),r(new Error(" "))):(e.showErrMsg.mark="",r())};return{accountForm:{username:"",name:"",password:"888888",mark:"",role:"root",officeId:1},rules:{username:[{trigger:"blur",validator:function(t,o,r){o=o.replace(/[^0-9a-zA-Z\s]/g,""),e.accountForm.username=o,o.trim()&&o.trim().length>=6&&o.trim().length<=12?(e.showErrMsg.username="",e.queryUsernameIsExist().then(function(){e.showErrMsg.username="",r()}).catch(function(){e.showErrMsg.username=e.$t("accountManager.usernameExistsTips"),r(new Error(" "))})):(e.showErrMsg.username=e.$t("accountManager.accountLengthTips"),r(new Error(" ")))}}],name:[{trigger:"change",validator:t},{trigger:"blur",validator:t}],password:[{trigger:"change",validator:o},{trigger:"blur",validator:o}],mark:[{trigger:"change",validator:r},{trigger:"blur",validator:r}]},filterText:"",treeData:Object(n.e)(),defaultProps:{children:"children",label:"label"},showErrMsg:{username:"",name:"",password:"",mark:""},isTriggerBeforeRouteLeave:!0}},computed:{},watch:{filterText:function(e){this.$refs.officeTree.filter(e)}},mounted:function(){},methods:{submitForm:function(e){this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;alert("submit!")})},resetForm:function(e){this.$refs[e].resetFields()},filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},clickOfficeHandle:function(e,t,o){},checkOfficeHandle:function(e,t){this.$refs.officeTree.getCheckedKeys().indexOf(e.id)>-1?(this.$refs.officeTree.setCheckedKeys([e.id]),this.$refs.officeTree.setCurrentKey(e.id),this.accountForm.officeId=e.id):(this.$refs.officeTree.setCheckedKeys([]),this.accountForm.officeId=-1),console.log("选中的机构id",this.accountForm.officeId)},cancelHandle:function(){var e=this;this.$confirm(this.$t("accountManager.leavePagePrompt"),this.$t("common.notice"),{confirmButtonText:this.$t("common.cancelBtn"),cancelButtonText:this.$t("common.confirmBtn"),type:"warning",closeOnClickModal:!1,closeOnPressEscape:!1,showClose:!1}).then(function(){}).catch(function(){e.isTriggerBeforeRouteLeave=!1,e.$router.push({path:"/system/accountManager"})})},queryUsernameIsExist:function(){var e=this;return new a.a(function(t,o){setTimeout(function(){console.log(e.accountForm.username),Math.random()>.49?t():o()},1e3)})}},beforeRouteLeave:function(e,t,o){this.isTriggerBeforeRouteLeave?this.$confirm(this.$t("accountManager.leavePagePrompt"),this.$t("common.notice"),{confirmButtonText:this.$t("common.cancelBtn"),cancelButtonText:this.$t("common.confirmBtn"),type:"warning",closeOnClickModal:!1,closeOnPressEscape:!1,showClose:!1}).then(function(){}).catch(function(){o()}):o()}},c={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"accountManager-createAccount-wrapper"},[o("el-form",{ref:"accountForm",attrs:{model:e.accountForm,rules:e.rules,"label-width":"110px","inline-message":"","label-position":"left"}},[o("el-form-item",{attrs:{label:e.$t("common.username")+" *",prop:"username"}},[o("el-input",{staticStyle:{width:"400px"},attrs:{maxlength:12,autofocus:""},model:{value:e.accountForm.username,callback:function(t){e.$set(e.accountForm,"username",t)},expression:"accountForm.username"}}),e._v(" "),o("el-alert",{directives:[{name:"show",rawName:"v-show",value:!!e.showErrMsg.username,expression:"!!showErrMsg.username"}],staticStyle:{position:"absolute",top:"0",left:"400px",padding:"0 16px","margin-left":"16px",width:"auto","white-space":"nowrap",border:"1px solid #FEDDCC"},attrs:{title:e.showErrMsg.username,type:"error","show-icon":"",closable:!1}})],1),e._v(" "),o("el-form-item",{attrs:{label:e.$t("common.name")+" *",prop:"name"}},[o("el-input",{staticStyle:{width:"400px"},attrs:{maxlength:24},model:{value:e.accountForm.name,callback:function(t){e.$set(e.accountForm,"name",t)},expression:"accountForm.name"}}),e._v(" "),o("el-alert",{directives:[{name:"show",rawName:"v-show",value:!!e.showErrMsg.name,expression:"!!showErrMsg.name"}],staticStyle:{position:"absolute",top:"0",left:"400px",padding:"0 16px","margin-left":"16px",width:"auto","white-space":"nowrap",border:"1px solid #FEDDCC"},attrs:{title:e.showErrMsg.name,type:"error","show-icon":"",closable:!1}})],1),e._v(" "),o("el-form-item",{attrs:{label:e.$t("common.password")+" *",prop:"password"}},[o("el-input",{staticStyle:{width:"400px"},attrs:{maxlength:12},model:{value:e.accountForm.password,callback:function(t){e.$set(e.accountForm,"password",t)},expression:"accountForm.password"}}),e._v(" "),o("el-alert",{directives:[{name:"show",rawName:"v-show",value:!!e.showErrMsg.password,expression:"!!showErrMsg.password"}],staticStyle:{position:"absolute",top:"0",left:"400px",padding:"0 16px","margin-left":"16px",width:"auto","white-space":"nowrap",border:"1px solid #FEDDCC"},attrs:{title:e.showErrMsg.password,type:"error","show-icon":"",closable:!1}})],1),e._v(" "),o("el-form-item",{attrs:{label:e.$t("accountManager.mark"),prop:"mark"}},[o("el-input",{staticStyle:{width:"400px"},attrs:{type:"textarea",maxlength:48,autosize:{minRows:5}},model:{value:e.accountForm.mark,callback:function(t){e.$set(e.accountForm,"mark",t)},expression:"accountForm.mark"}}),e._v(" "),o("el-alert",{directives:[{name:"show",rawName:"v-show",value:!!e.showErrMsg.mark,expression:"!!showErrMsg.mark"}],staticStyle:{position:"absolute",bottom:"0",left:"400px",padding:"0 16px","margin-left":"16px",width:"auto","white-space":"nowrap",border:"1px solid #FEDDCC"},attrs:{title:e.showErrMsg.mark,type:"error","show-icon":"",closable:!1}})],1),e._v(" "),o("el-form-item",{attrs:{label:e.$t("accountManager.accountRole")+" *",prop:"role"}},[o("el-radio-group",{model:{value:e.accountForm.role,callback:function(t){e.$set(e.accountForm,"role",t)},expression:"accountForm.role"}},[o("el-radio",{attrs:{label:"root"}},[e._v(e._s(e.$t("common.rootRole")))]),e._v(" "),o("el-radio",{attrs:{label:"user"}},[e._v(e._s(e.$t("common.userRole")))])],1),e._v(" "),o("el-popover",{attrs:{placement:"bottom-start",title:"",width:"200",trigger:"hover",content:e.$t("accountManager.generalAdministratorPermissionStatement")}},[o("i",{staticClass:"el-icon-info",staticStyle:{color:"#909399",cursor:"pointer","margin-left":"10px"},attrs:{slot:"reference"},slot:"reference"})])],1),e._v(" "),o("el-form-item",{attrs:{label:e.$t("accountManager.allocationOrganization")+" *",prop:"officeId"}},[o("el-input",{staticStyle:{width:"400px","margin-bottom":"5px"},attrs:{placeholder:e.$t("common.searchOrganizationName"),"suffix-icon":"el-icon-search",clearable:"",closable:!1},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e._v(" "),o("el-tree",{ref:"officeTree",staticClass:"filter-tree",staticStyle:{width:"400px","min-height":"400px"},attrs:{data:e.treeData,props:e.defaultProps,"default-expanded-keys":[1],"default-checked-keys":[1],"filter-node-method":e.filterNode,"show-checkbox":"","highlight-current":"","node-key":"id","check-on-click-node":"","expand-on-click-node":!1,"check-strictly":""},on:{"node-click":e.clickOfficeHandle,check:e.checkOfficeHandle}})],1),e._v(" "),o("el-form-item",[o("el-button",{attrs:{type:"primary",disabled:!e.accountForm.username||e.showErrMsg.username.length>6||!e.accountForm.name||!e.accountForm.password||e.accountForm.password.length<6||!e.accountForm.role||0!==e.accountForm.officeId&&!e.accountForm.officeId||-1===e.accountForm.officeId},on:{click:function(t){e.submitForm("accountForm")}}},[e._v(e._s(e.$t("common.confirmBtn"))+"\n      ")]),e._v(" "),o("el-button",{on:{click:e.cancelHandle}},[e._v(e._s(e.$t("common.cancelBtn")))])],1)],1)],1)},staticRenderFns:[]};var i=o("VU/8")(s,c,!1,function(e){o("SeVt"),o("23qH")},"data-v-8dde3a36",null);t.default=i.exports},SeVt:function(e,t,o){var r=o("hDSN");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);o("rjj0")("8e80405a",r,!0)},hDSN:function(e,t,o){(e.exports=o("FZ+f")(!1)).push([e.i,"/* reset element-ui css */\n",""])},ozRk:function(e,t,o){(e.exports=o("FZ+f")(!1)).push([e.i,"",""])}});